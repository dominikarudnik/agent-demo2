<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Tylko â€” Demo</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body><!-- ChatKit mount target -->
<div id="chatkit-root"></div>

<!-- Load the ChatKit web component from OpenAI's CDN -->
<script src="https://cdn.platform.openai.com/deployments/chatkit/chatkit.js" defer></script>

<script>
  // Called once the CDN script finished loading
  window.addEventListener("load", async () => {
    async function getClientSecret() {
      const res = await fetch("/api/chatkit-session", { method: "POST" });
      if (!res.ok) throw new Error("Failed to get client_secret");
      const { client_secret } = await res.json();
      return client_secret;
    }

    // Create the web component and configure it
    const chat = document.createElement("openai-chatkit");
    chat.setOptions({
      api: { getClientSecret },
      theme: { light: { primaryColor: "#0B2381" } }
    });

    chat.style.width = "100%";
    chat.style.maxWidth = "420px";
    chat.style.height = "600px";
    chat.style.margin = "0 auto";

    document.getElementById("chatkit-root").appendChild(chat);
  });
</script></body>
</html>
